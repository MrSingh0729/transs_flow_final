	<!-- templates/accounts/reset_password.html -->
	<!DOCTYPE html>
	<html lang="en">
	<head>
	    <meta charset="UTF-8">
	    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	    <title>Reset Password - Transs Flow</title>
	    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
	    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
	    <style>
	        body {
	            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
	            min-height: 100vh;
	            display: flex;
	            align-items: center;
	        }
	        .reset-card {
	            background: white;
	            border-radius: 16px;
	            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
	            width: 100%;
	            max-width: 400px;
	            padding: 30px;
	            text-align: center;
	        }
	        .logo-section {
	            margin-bottom: 30px;
	        }
	        .logo {
	            width: 60px;
	            height: 60px;
	            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
	            border-radius: 12px;
	            display: flex;
	            align-items: center;
	            justify-content: center;
	            font-weight: bold;
	            color: white;
	            font-size: 18px;
	        }
	        .form-section {
	            margin-bottom: 30px;
	        }
	        .form-group {
	            margin-bottom: 20px;
	        }
	        .form-control {
	            border: 2px solid #e5e7eb;
	            padding: 12px;
	            border-radius: 8px;
	            font-size: 16px;
	            transition: all 0.3s ease;
	            width: 100%;
	        }
	        .form-control:focus {
	            border-color: #667eea;
	            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.2);
	            outline: none;
	        }
	        .btn-reset {
	            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
	            color: white;
	            border: none;
	            padding: 12px 24px;
	            border-radius: 8px;
	            font-size: 16px;
	            font-weight: 600;
	            cursor: pointer;
	            transition: all 0.3s ease;
	            width: 100%;
	        }
	        .btn-reset:hover {
	            background: linear-gradient(135deg, #764ba2 0%, #5a9fd4 100%);
	            transform: translateY(-2px);
	            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
	        }
	        .validation-error {
	            color: #ef4444;
	            font-size: 14px;
	            margin-top: 10px;
	            padding: 10px;
	            background: #fee2e2;
	            border-radius: 6px;
	        }
	        .success-message {
	            color: #28a745;
	            font-size: 14px;
	            margin-top: 10px;
	            padding: 10px;
	            background: #d1fae5;
	            border-radius: 6px;
	        }
	        .timer {
	            color: #f59e0b;
	            font-size: 14px;
	            margin-top: 10px;
	            font-weight: 600;
	        }
	    </style>
	</head>
	<body>
	    <div class="reset-card">
	        <!-- Logo Section -->
	        <div class="logo-section">
	            <div class="logo">
	                <i class="fas fa-building"></i>
	            </div>
	            <h3 class="text-white mt-2">Transs Flow</h3>
	        </div>
	        <!-- Success/Message Section -->
	        <div id="messageSection">
	            <!-- Content will be dynamically inserted here -->
	        </div>
	        <!-- Timer Section -->
	        <div class="timer" id="timerSection" style="display: none;">
	            <i class="fas fa-clock"></i>
	            <span>Redirecting in <span id="countdown">3</span> seconds...</span>
	        </div>
	        <!-- Form Section -->
	        <div class="form-section" id="formSection">
	            {% if form.errors %}
	                <div class="validation-error">
	                    <i class="fas fa-exclamation-circle"></i>
	                    <strong>Error:</strong>
	                    {% for field, errors in form.errors.items %}
	                        <div>{{ field }}: {{ errors|join:", " }}</div>
	                    {% endfor %}
	                </div>
	            {% endif %}
	            <form method="post">
	                {% csrf_token %}
	                <div class="form-group">
	                    <input type="hidden" name="token" value="{{ token }}">
	                </div>
	                <div class="form-group">
	                    <label for="new_password" class="d-block text-gray-700 mb-2">New Password</label>
	                    <input type="password" 
	                           name="new_password" 
	                           id="new_password"
	                           class="form-control" 
	                           placeholder="Enter new password"
	                           required>
	                </div>
	            </div>
	                <div class="form-group">
	                    <label for="confirm_password" class="d-block text-gray-700 mb-2">Confirm Password</label>
	                    <input type="password" 
	                           name="confirm_password" 
	                           id="confirm_password"
	                           class="form-control" 
	                           placeholder="Confirm new password"
	                           required>
	                </div>
	            </div>
	                <button type="submit" class="btn-reset">
	                    <i class="fas fa-key"></i>
	                    Reset Password
	                </button>
	            </form>
	        </div>
	    </div>
	    <script>
	        // Countdown timer
	        let countdown = 3;
	        function updateCountdown() {
	            document.getElementById('countdown').textContent = countdown;
	            if (countdown > 0) {
	                countdown--;
	                setTimeout(updateCountdown, 1000);
	            } else {
	                document.getElementById('timerSection').style.display = 'none';
	                document.getElementById('formSection').style.display = 'block';
	            }
	        }
	        function showMessage(message, type) {
	            const messageSection = document.getElementById('messageSection');
	            const formSection = document.getElementById('formSection');
	            if (type === 'success') {
	                messageSection.className = 'success-message';
	                messageSection.innerHTML = `
	                    <i class="fas fa-check-circle"></i>
	                    <strong>Success!</strong>
	                    ${message}
	                `;
	            } else {
	                messageSection.className = 'validation-error';
	                messageSection.innerHTML = `
	                    <i class="fas fa-exclamation-circle"></i>
	                    <strong>Error:</strong>
	                    ${message}
	                `;
	            }
	            formSection.style.display = 'none';
	            // Show timer for success message
	            if (type === 'success') {
	                document.getElementById('timerSection').style.display = 'block';
	                setTimeout(updateCountdown, 1000);
	            }
	        }
	        function resetPassword() {
	            const form = document.querySelector('form');
	            form.submit();
	        }
	        // Validate passwords on form submit
	        document.querySelector('form').addEventListener('submit', function(e) {
	            e.preventDefault();
	            const newPassword = document.getElementById('new_password').value;
	            const confirmPassword = document.getElementById('confirm_password').value;
	            if (newPassword !== confirmPassword) {
	                showMessage('Passwords do not match', 'error');
	                return;
	            }
	            if (newPassword.length < 8) {
	                showMessage('Password must be at least 8 characters long', 'error');
	                return;
	            }
	            // Show loading state
	            document.getElementById('messageSection').style.display = 'block';
	            document.getElementById('messageSection').innerHTML = `
	                <i class="fas fa-spinner fa-spin"></i>
	                <strong>Processing...</strong>
	                Resetting password...
	            `;
	            // Submit the form
	            form.submit();
	        });
	        // Handle form submission response
	        const form = document.querySelector('form');
	        form.addEventListener('submit', function(e) {
	            // Prevent default submission to handle it manually
	            e.preventDefault();
	            const formData = new FormData(form);
	            fetch(window.location.href, {
	                method: 'POST',
	                body: formData
	            })
	            .then(response => response.text())
	            .then(html => {
	                const parser = new DOMParser();
	                const doc = parser.parseFromString(html, 'text/html');
	                // Check for validation errors
	                const errors = doc.querySelector('.validation-error');
	                if (errors) {
	                    document.getElementById('formSection').style.display = 'block';
	                    document.getElementById('messageSection').style.display = 'block';
	                    document.getElementById('messageSection').className = 'validation-error';
	                    document.getElementById('messageSection').innerHTML = errors.innerHTML;
	                } else {
	                    // Check for success message
	                    const success = doc.querySelector('.success-message');
	                    if (success) {
	                        showMessage('Password has been reset successfully!', 'success');
	                    setTimeout(() => {
	                        window.location.href = '{% url 'login' %}';
	                    }, 2000);
	                    } else {
	                        // Check for any other message
	                        const other = doc.querySelector('.alert');
	                        if (other) {
	                            document.getElementById('messageSection').style.display = 'block';
	                            document.getElementById('messageSection').innerHTML = other.innerHTML;
	                        }
	                    }
	                }
	            })
	            .catch(error => {
	                showMessage('An error occurred. Please try again.', 'error');
	            });
	        });
	    </script>
	</body>
	</html>